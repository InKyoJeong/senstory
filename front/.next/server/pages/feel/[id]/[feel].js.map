{"version":3,"file":"../pages/feel/[id]/[feel].js","mappings":"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","sources":["webpack://scenery-book-front/./pages/feel/[id]/[feel].tsx","webpack://scenery-book-front/external \"@ant-design/icons\"","webpack://scenery-book-front/external \"antd\"","webpack://scenery-book-front/external \"axios\"","webpack://scenery-book-front/external \"dayjs\"","webpack://scenery-book-front/external \"dayjs/locale/ko\"","webpack://scenery-book-front/external \"dayjs/plugin/relativeTime\"","webpack://scenery-book-front/external \"immer\"","webpack://scenery-book-front/external \"next-redux-wrapper\"","webpack://scenery-book-front/external \"next/dist/server/denormalize-page-path.js\"","webpack://scenery-book-front/external \"next/dist/server/image-config.js\"","webpack://scenery-book-front/external \"next/dist/shared/lib/head.js\"","webpack://scenery-book-front/external \"next/dist/shared/lib/i18n/normalize-locale-path.js\"","webpack://scenery-book-front/external \"next/dist/shared/lib/mitt.js\"","webpack://scenery-book-front/external \"next/dist/shared/lib/router-context.js\"","webpack://scenery-book-front/external \"next/dist/shared/lib/router/utils/get-asset-path-from-route.js\"","webpack://scenery-book-front/external \"next/dist/shared/lib/router/utils/is-dynamic.js\"","webpack://scenery-book-front/external \"next/dist/shared/lib/router/utils/parse-relative-url.js\"","webpack://scenery-book-front/external \"next/dist/shared/lib/router/utils/querystring.js\"","webpack://scenery-book-front/external \"next/dist/shared/lib/router/utils/route-matcher.js\"","webpack://scenery-book-front/external \"next/dist/shared/lib/router/utils/route-regex.js\"","webpack://scenery-book-front/external \"next/dist/shared/lib/to-base-64.js\"","webpack://scenery-book-front/external \"next/dist/shared/lib/utils.js\"","webpack://scenery-book-front/external \"next/router\"","webpack://scenery-book-front/external \"react\"","webpack://scenery-book-front/external \"react-intersection-observer\"","webpack://scenery-book-front/external \"react-redux\"","webpack://scenery-book-front/external \"react/jsx-runtime\"","webpack://scenery-book-front/external \"redux\"","webpack://scenery-book-front/external \"redux-devtools-extension\"","webpack://scenery-book-front/external \"redux-saga\"","webpack://scenery-book-front/external \"redux-saga/effects\"","webpack://scenery-book-front/external \"styled-components\""],"sourcesContent":["import React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { END } from 'redux-saga';\nimport { useRouter } from 'next/router';\nimport Router from 'next/router';\nimport { useInView } from 'react-intersection-observer';\nimport axios from 'axios';\nimport wrapper from '../../../store/configureStore';\nimport { loadFeelDiarysRequest } from '../../../reducers/diary/loadFeelDiarys';\nimport { loadMeRequest } from '../../../reducers/user/loadMe';\nimport { RootState } from '../../../reducers';\n\nimport Layout from '../../../components/common/Layout';\nimport DiaryBlock from '../../../components/diary/DiaryBlock';\nimport DiaryBlockContainer from '../../../components/diary/DiaryBlockContainer';\nimport Loader from '../../../components/common/Loader';\nimport FeelSelectForm from '../../../components/diary/FeelSelectForm';\nimport DiaryEmpty from '../../../components/diary/DiaryEmpty';\nimport Conditional from '../../../hocs/Conditional';\n\nconst Feel = () => {\n  const dispatch = useDispatch();\n  const router = useRouter();\n  const { id, feel } = router.query;\n  const userId = parseInt(id as string, 10);\n  const { mainDiarys, hasMoreDiarys, loadFeelDiarysLoading } = useSelector((state: RootState) => state.diary);\n  const { me } = useSelector((state: RootState) => state.user);\n\n  const [ref, inView] = useInView();\n\n  useEffect(() => {\n    if (!me?.id || userId !== me?.id) {\n      Router.push('/');\n    }\n  }, [userId, me?.id]);\n\n  useEffect(() => {\n    if (inView && hasMoreDiarys && !loadFeelDiarysLoading) {\n      const lastId = mainDiarys[mainDiarys.length - 1]?.id;\n      dispatch(loadFeelDiarysRequest(userId, feel as string, lastId));\n    }\n  }, [inView, hasMoreDiarys, loadFeelDiarysLoading, mainDiarys, feel]);\n\n  if (!me?.id || userId !== me?.id) {\n    return <Loader text=\"잘못된 접근입니다. 홈으로 이동합니다.\" />;\n  }\n\n  return (\n    <Layout diary>\n      <FeelSelectForm hide />\n\n      <Conditional condition={mainDiarys.length === 0}>\n        <DiaryEmpty />\n      </Conditional>\n\n      <DiaryBlockContainer>\n        {mainDiarys.map((diary) => (\n          <DiaryBlock key={diary.id} diary={diary} ref={hasMoreDiarys && !loadFeelDiarysLoading ? ref : undefined} />\n        ))}\n      </DiaryBlockContainer>\n    </Layout>\n  );\n};\n\nexport const getServerSideProps = wrapper.getServerSideProps((store): any => async ({ req, params }: any) => {\n  const cookie = req ? req.headers.cookie : '';\n  axios.defaults.headers.Cookie = '';\n  if (req && cookie) {\n    axios.defaults.headers.Cookie = cookie;\n  }\n\n  store.dispatch(loadFeelDiarysRequest(params.id, params.feel));\n  store.dispatch(loadMeRequest());\n  store.dispatch(END);\n  await store.sagaTask.toPromise();\n});\n\nexport default Feel;\n","module.exports = require(\"@ant-design/icons\");","module.exports = require(\"antd\");","module.exports = require(\"axios\");","module.exports = require(\"dayjs\");","module.exports = require(\"dayjs/locale/ko\");","module.exports = require(\"dayjs/plugin/relativeTime\");","module.exports = require(\"immer\");","module.exports = require(\"next-redux-wrapper\");","module.exports = require(\"next/dist/server/denormalize-page-path.js\");","module.exports = require(\"next/dist/server/image-config.js\");","module.exports = require(\"next/dist/shared/lib/head.js\");","module.exports = require(\"next/dist/shared/lib/i18n/normalize-locale-path.js\");","module.exports = require(\"next/dist/shared/lib/mitt.js\");","module.exports = require(\"next/dist/shared/lib/router-context.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/get-asset-path-from-route.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/is-dynamic.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/parse-relative-url.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/querystring.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/route-matcher.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/route-regex.js\");","module.exports = require(\"next/dist/shared/lib/to-base-64.js\");","module.exports = require(\"next/dist/shared/lib/utils.js\");","module.exports = require(\"next/router\");","module.exports = require(\"react\");","module.exports = require(\"react-intersection-observer\");","module.exports = require(\"react-redux\");","module.exports = require(\"react/jsx-runtime\");","module.exports = require(\"redux\");","module.exports = require(\"redux-devtools-extension\");","module.exports = require(\"redux-saga\");","module.exports = require(\"redux-saga/effects\");","module.exports = require(\"styled-components\");"],"names":["React","useEffect","useDispatch","useSelector","END","useRouter","Router","useInView","axios","wrapper","loadFeelDiarysRequest","loadMeRequest","Layout","DiaryBlock","DiaryBlockContainer","Loader","FeelSelectForm","DiaryEmpty","Conditional","Feel","dispatch","router","id","feel","query","userId","parseInt","mainDiarys","hasMoreDiarys","loadFeelDiarysLoading","state","diary","me","user","ref","inView","push","lastId","length","map","undefined","getServerSideProps","store","req","params","cookie","headers","defaults","Cookie","sagaTask","toPromise"],"sourceRoot":""}