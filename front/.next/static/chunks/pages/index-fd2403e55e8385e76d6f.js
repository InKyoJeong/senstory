(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{1627:function(e,t,r){"use strict";r.d(t,{Z:function(){return c}});var n=r(1413),i=r(7294),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M685.4 354.8c0-4.4-3.6-8-8-8l-66 .3L512 465.6l-99.3-118.4-66.1-.3c-4.4 0-8 3.5-8 8 0 1.9.7 3.7 1.9 5.2l130.1 155L340.5 670a8.32 8.32 0 00-1.9 5.2c0 4.4 3.6 8 8 8l66.1-.3L512 564.4l99.3 118.4 66 .3c4.4 0 8-3.5 8-8 0-1.9-.7-3.7-1.9-5.2L553.5 515l130.1-155c1.2-1.4 1.8-3.3 1.8-5.2z"}},{tag:"path",attrs:{d:"M512 65C264.6 65 64 265.6 64 513s200.6 448 448 448 448-200.6 448-448S759.4 65 512 65zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"close-circle",theme:"outlined"},s=r(6988),a=function(e,t){return i.createElement(s.Z,(0,n.Z)((0,n.Z)({},e),{},{ref:t,icon:o}))};a.displayName="CloseCircleOutlined";var c=i.forwardRef(a)},5054:function(e,t,r){"use strict";r.r(t),r.d(t,{__N_SSP:function(){return z},default:function(){return L}});var n=r(9439),i=r(7294),o=r(9226),s=r(131),a=r(4724),c=r(1986),l=r(5394),u=r(5053),d=r(1413),p={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zM338 304c35.3 0 64 28.7 64 64s-28.7 64-64 64-64-28.7-64-64 28.7-64 64-64zm513.9 437.1a8.11 8.11 0 01-5.2 1.9H177.2c-4.4 0-8-3.6-8-8 0-1.9.7-3.7 1.9-5.2l170.3-202c2.8-3.4 7.9-3.8 11.3-1 .3.3.7.6 1 1l99.4 118 158.1-187.5c2.8-3.4 7.9-3.8 11.3-1 .3.3.7.6 1 1l229.6 271.6c2.6 3.3 2.2 8.4-1.2 11.2z"}}]},name:"picture",theme:"filled"},f=r(6988),h=function(e,t){return i.createElement(f.Z,(0,d.Z)((0,d.Z)({},e),{},{ref:t,icon:p}))};h.displayName="PictureFilled";var g=i.forwardRef(h),v=r(6511),m=r(8427),b=r(9163),y=r(8901),x=r(86),w=r(8222),k=r(1627),_=(0,b.ZP)(y.Z).withConfig({displayName:"styles__FormWrapper",componentId:"sc-k6ryx9-0"})(["background-color:",";margin-top:20px;margin-bottom:40px;padding:10px;border-radius:10px;"],(function(e){return e.theme.color.DARK_GRAY})),C=(0,b.ZP)(x.Z.TextArea).withConfig({displayName:"styles__PostWriteInput",componentId:"sc-k6ryx9-1"})(["font-size:16px;margin-bottom:8px;background-color:",";border-color:",";color:white;border-radius:10px;"],(function(e){return e.theme.color.LIGHT_GRAY}),(function(e){return e.theme.color.LIGHT_GRAY})),V=b.ZP.div.withConfig({displayName:"styles__WriteButtonWrapper",componentId:"sc-k6ryx9-2"})(["display:flex;justify-content:flex-end;"]),Z=(0,b.ZP)(w.Z).withConfig({displayName:"styles__PostWriteButton",componentId:"sc-k6ryx9-3"})(["border-radius:10px;margin-left:8px;float:right;"]),I=(0,b.ZP)(w.Z).withConfig({displayName:"styles__ImageEnrollBtn",componentId:"sc-k6ryx9-4"})(["border-radius:10px;color:#9c4343;background-color:#f5c1c1;border-color:#f5d0d0;&:hover,&:focus{background-color:#e89b9b;color:#823030;border-color:#f5b0b0;}"]),P=b.ZP.div.withConfig({displayName:"styles__ImagesWrapper",componentId:"sc-k6ryx9-5"})(["margin-top:20px;display:flex;align-items:center;overflow:auto;& div:not(:last-child){margin-right:20px;}& div{position:relative;display:inline-block;margin-top:8px;& img{width:100px;height:100px;border-radius:10px;}@media screen and (max-width:567px){& img{width:80px;height:80px;}}}"]),E=(0,b.ZP)(k.Z).withConfig({displayName:"styles__ImageDeleteBtn",componentId:"sc-k6ryx9-6"})(["position:absolute;top:-8px;right:-8px;font-size:20px;border-radius:10px;background-color:black;color:#d66565;&:hover{color:#e03d3d;}"]),j=r(881),N=r(4813),O=r(8444),M=r(5893),A=function(){var e=(0,o.I0)(),t=(0,o.v9)((function(e){return e.post})),r=t.imagePaths,s=t.addPostFinish,a=t.addPostLoading,c=t.addPostError,l=(0,m.Z)(""),u=(0,n.Z)(l,3),d=u[0],p=u[1],f=u[2];(0,i.useEffect)((function(){s&&f("")}),[s]),(0,i.useEffect)((function(){c&&alert(c)}),[c]);var h=(0,i.useCallback)((function(){if(!d||!d.trim())return alert("\ub0b4\uc6a9\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.");var t=new FormData;return r.forEach((function(e){t.append("image",e)})),t.append("content",d),e((0,j.BZ)(t))}),[d,r]),b=(0,i.useRef)(null),y=(0,i.useCallback)((function(){b.current&&b.current.click()}),[b.current]),x=(0,i.useCallback)((function(t){var r=new FormData;[].forEach.call(t.target.files,(function(e){r.append("image",e)})),e((0,N.Pf)(r))}),[]),w=(0,i.useCallback)((function(t){return function(){e((0,O.q)(t))}}),[]);return(0,M.jsxs)(_,{encType:"multipart/form-data",onFinish:h,children:[(0,M.jsx)(C,{value:d,onChange:p,maxLength:140,placeholder:"\ub0b4\uc6a9\uc744 \uc785\ub825\ud558\uc138\uc694."}),(0,M.jsxs)(V,{children:[(0,M.jsx)("input",{type:"file",name:"image",multiple:!0,hidden:!0,ref:b,onChange:x}),(0,M.jsx)(I,{onClick:y,children:(0,M.jsx)(g,{})}),(0,M.jsx)(Z,{type:"primary",htmlType:"submit",loading:a,children:(0,M.jsx)(v.Z,{})})]}),(0,M.jsx)(P,{children:r.map((function(e,t){return(0,M.jsxs)("div",{children:[(0,M.jsx)("img",{src:e.replace(/\/thumb\//,"/original/"),alt:e}),(0,M.jsx)(E,{onClick:w(t)})]},e)}))})]})},z=!0,L=function(){var e=(0,o.I0)(),t=(0,o.v9)((function(e){return e.user})).me,r=(0,o.v9)((function(e){return e.post})),d=r.mainPosts,p=r.hasMorePosts,f=r.loadAllPostLoading,h=r.repostError,g=r.loadAllPostError,v=(0,s.YD)(),m=(0,n.Z)(v,2),b=m[0],y=m[1];return(0,i.useEffect)((function(){h&&alert(h)}),[h]),(0,i.useEffect)((function(){g&&alert(g)}),[g]),(0,i.useEffect)((function(){if(y&&p&&!f){var t,r=null===(t=d[d.length-1])||void 0===t?void 0:t.id;e((0,a.sE)(r))}}),[y,p,f,d]),(0,M.jsxs)(l.Z,{main:!0,children:[(0,M.jsx)(c.Z,{condition:t,children:(0,M.jsx)(A,{})}),d.map((function(e){return(0,M.jsx)(u.Z,{post:e,ref:p&&!f?b:void 0},e.id)}))]})}},5301:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(5054)}])},131:function(e,t,r){"use strict";r.d(t,{YD:function(){return p}});var n=r(7294);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var o=new Map,s=new WeakMap,a=0;function c(e){return Object.keys(e).sort().filter((function(t){return void 0!==e[t]})).map((function(t){return t+"_"+("root"===t?(r=e.root)?(s.has(r)||(a+=1,s.set(r,a.toString())),s.get(r)):"0":e[t]);var r})).toString()}function l(e,t,r){if(void 0===r&&(r={}),!e)return function(){};var n=function(e){var t=c(e),r=o.get(t);if(!r){var n,i=new Map,s=new IntersectionObserver((function(t){t.forEach((function(t){var r,o=t.isIntersecting&&n.some((function(e){return t.intersectionRatio>=e}));e.trackVisibility&&"undefined"===typeof t.isVisible&&(t.isVisible=o),null==(r=i.get(t.target))||r.forEach((function(e){e(o,t)}))}))}),e);n=s.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),r={id:t,observer:s,elements:i},o.set(t,r)}return r}(r),i=n.id,s=n.observer,a=n.elements,l=a.get(e)||[];return a.has(e)||a.set(e,l),l.push(t),s.observe(e),function(){l.splice(l.indexOf(t),1),0===l.length&&(a.delete(e),s.unobserve(e)),0===a.size&&(s.disconnect(),o.delete(i))}}function u(e){return"function"!==typeof e.children}var d=function(e){var t,r;function o(t){var r;return(r=e.call(this,t)||this).node=null,r._unobserveCb=null,r.handleNode=function(e){r.node&&(r.unobserve(),e||r.props.triggerOnce||r.props.skip||r.setState({inView:!!r.props.initialInView,entry:void 0})),r.node=e||null,r.observeNode()},r.handleChange=function(e,t){e&&r.props.triggerOnce&&r.unobserve(),u(r.props)||r.setState({inView:e,entry:t}),r.props.onChange&&r.props.onChange(e,t)},r.state={inView:!!t.initialInView,entry:void 0},r}r=e,(t=o).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var s=o.prototype;return s.componentDidUpdate=function(e){e.rootMargin===this.props.rootMargin&&e.root===this.props.root&&e.threshold===this.props.threshold&&e.skip===this.props.skip&&e.trackVisibility===this.props.trackVisibility&&e.delay===this.props.delay||(this.unobserve(),this.observeNode())},s.componentWillUnmount=function(){this.unobserve(),this.node=null},s.observeNode=function(){if(this.node&&!this.props.skip){var e=this.props,t=e.threshold,r=e.root,n=e.rootMargin,i=e.trackVisibility,o=e.delay;this._unobserveCb=l(this.node,this.handleChange,{threshold:t,root:r,rootMargin:n,trackVisibility:i,delay:o})}},s.unobserve=function(){this._unobserveCb&&(this._unobserveCb(),this._unobserveCb=null)},s.render=function(){if(!u(this.props)){var e=this.state,t=e.inView,r=e.entry;return this.props.children({inView:t,entry:r,ref:this.handleNode})}var o=this.props,s=o.children,a=o.as,c=o.tag,l=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(o,["children","as","tag","triggerOnce","threshold","root","rootMargin","onChange","skip","trackVisibility","delay","initialInView"]);return(0,n.createElement)(a||c||"div",i({ref:this.handleNode},l),s)},o}(n.Component);function p(e){var t=void 0===e?{}:e,r=t.threshold,i=t.delay,o=t.trackVisibility,s=t.rootMargin,a=t.root,c=t.triggerOnce,u=t.skip,d=t.initialInView,p=(0,n.useRef)(),f=(0,n.useState)({inView:!!d}),h=f[0],g=f[1],v=(0,n.useCallback)((function(e){void 0!==p.current&&(p.current(),p.current=void 0),u||e&&(p.current=l(e,(function(e,t){g({inView:e,entry:t}),t.isIntersecting&&c&&p.current&&(p.current(),p.current=void 0)}),{root:a,rootMargin:s,threshold:r,trackVisibility:o,delay:i}))}),[Array.isArray(r)?r.toString():r,a,s,c,u,o,i]);(0,n.useEffect)((function(){p.current||!h.entry||c||u||g({inView:!!d})}));var m=[v,h.inView,h.entry];return m.ref=m[0],m.inView=m[1],m.entry=m[2],m}d.displayName="InView",d.defaultProps={threshold:0,triggerOnce:!1,initialInView:!1}}},function(e){e.O(0,[988,211,347,8,284,394,53,774,888,179],(function(){return t=5301,e(e.s=t);var t}));var t=e.O();_N_E=t}]);